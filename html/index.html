<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="shortcut icon"
      href="../assets/icons8-rick-sanchez-100.png"
      type="image/x-icon"
    />
    <title>RICK AND MORTY</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="../style/style.css" />
  </head>

  <body>
    <header class="position-relative">
      <div id="navbar">
        <nav class="navbar navbar-expand-md navbar-dark mb-4">
          <div class="container-fluid d-flex">
            <a class="navbar-brand" href="#"
              ><img class="logo" src="../assets/rickAndMortyLogo.png" alt=""
            /></a>
            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarNav"
              aria-controls="navbarNav"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
              <ul class="navbar-nav ms-auto">
                <li class="nav-item">
                  <a
                    class="nav-link"
                    style="font-size: larger"
                    href="../html/index.html"
                    ><img
                      class="home"
                      src="../assets/home-sin-animacion.png"
                      alt=""
                  /></a>
                </li>
                <li class="nav-item">
                  <a
                    class="nav-link"
                    style="font-size: larger"
                    href="../html/stadistics.html"
                    ><img
                      class="home"
                      src="../assets/Stats-5-9-2024.png"
                      alt=""
                  /></a>
                </li>
              </ul>
            </div>
          </div>
        </nav>
      </div>

      <div
        id="carouselExampleSlidesOnly"
        class="carousel slide"
        data-bs-ride="carousel"
        data-bs-interval="4000"
      >
        <div class="carousel-inner">
          <div class="carousel-item active" data-bs-interval="4000">
            <img
              class="carrouselImg d-block w-100"
              src="../assets/epic-rick-and-morty.gif"
              alt="..."
            />
          </div>
          <div class="carousel-item">
            <img
              class="carrouselImg d-block w-100"
              src="../assets/1.gif"
              alt="..."
            />
          </div>
          <div class="carousel-item">
            <img
              class="carrouselImg d-block w-100"
              src="../assets/2.gif"
              alt="..."
            />
          </div>
          <div class="carousel-item">
            <img
              class="carrouselImg d-block w-100"
              src="../assets/3.gif"
              alt="..."
            />
          </div>
          <div class="carousel-item">
            <img
              class="carrouselImg d-block w-100"
              src="../assets/5.gif"
              alt="..."
            />
          </div>
        </div>
      </div>

      <div
        class="container-fluid d-flex justify-content-center align-items-center"
      >
        <div
          class="w-80 rick-and-morty-font d-flex justify-content-center align-items-center p-4"
        >
          <p>
            Rick and Morty is a groundbreaking animated series that follows the
            interdimensional adventures of Rick Sanchez, a genius yet reckless
            scientist, and his anxious grandson, Morty Smith. Known for its
            sharp wit, dark humor, and philosophical undertones, the show blends
            absurd science fiction with relatable family dynamics. Through their
            chaotic journeys across multiple realities, Rick and Morty explores
            existential questions, societal critiques, and the human condition,
            all while pushing the limits of animated storytelling.
          </p>
        </div>
      </div>
    </header>

    <main id="appHome">
      <div class="container-fluid p-2">
        <!-- Barra de búsqueda y filtros -->
        <div
          class="d-flex justify-content-between align-items-center bg-dark rounded-3 text-white mt-3 mb-3 p-3"
        >
          <!-- Botón para alternar entre personajes y episodios -->
          <button class="btn btn-outline-secondary me-2" @click="toggleData">
            Ver {{ isCharacters ? 'Episodios' : 'Personajes' }}
          </button>

          <!-- Filtros de estado y especies para personajes -->
          <div v-if="isCharacters" class="d-flex align-items-center">
            <!-- Checkboxes para estado -->
            <label for="status-filter" class="text-white me-2"
              >Estado de Personajes:</label
            >
            <div class="form-check form-check-inline">
              <input
                class="form-check-input"
                type="checkbox"
                id="alive"
                value="Alive"
                v-model="statusFilter"
              />
              <label class="form-check-label text-white" for="alive"
                >Vivo</label
              >
            </div>
            <div class="form-check form-check-inline">
              <input
                class="form-check-input"
                type="checkbox"
                id="dead"
                value="Dead"
                v-model="statusFilter"
              />
              <label class="form-check-label text-white" for="dead"
                >Muerto</label
              >
            </div>

            <!-- Dropdown para especies -->
            <label for="species-dropdown" class="text-white me-2"
              >Especies:</label
            >
            <button
              type="button"
              class="btn btn-outline-secondary dropdown-toggle"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              Seleccionar Especies
            </button>
            <ul class="dropdown-menu" id="species-dropdown">
              <li v-for="species in allSpecies" :key="species">
                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    :value="species"
                    v-model="speciesFilter"
                    :id="'species-' + species"
                  />
                  <label class="form-check-label" :for="'species-' + species"
                    >{{ species }}</label
                  >
                </div>
              </li>
            </ul>
          </div>

          <!-- Barra de búsqueda (a la derecha) -->
          <div class="input-group w-auto">
            <input
              type="text"
              class="form-control form-control-sm"
              placeholder="Search"
              aria-label="Search"
              v-model="textSearch"
            />
            <button class="btn btn-outline-secondary bg-dark bg-gradient">
              Search
            </button>
          </div>
        </div>

        <!-- Botones de paginación -->
        <div class="d-flex justify-content-center align-items-center mt-4">
          <button
            class="btn btn-primary m-2"
            @click="fetchData(prevPage)"
            :disabled="!prevPage"
          >
            Anterior
          </button>

          <!-- Enumeración de páginas y campo de entrada -->
          <span class="text-white mx-2">
            Página
            <input
              type="number"
              v-model.number="currentPage"
              min="1"
              :max="totalPages"
              @change="goToPage(currentPage)"
              class="form-control form-control-sm d-inline-block w-auto"
            />
            de {{ totalPages }}
          </span>

          <button
            class="btn btn-primary m-2"
            @click="fetchData(nextPage)"
            :disabled="!nextPage"
          >
            Siguiente
          </button>
        </div>

        <!-- Sección de personajes -->
        <div v-if="isCharacters" class="character-list">
          <h2 class="text-center text-white">Personajes</h2>
          <div
            class="gap-2 container-fluid d-flex mt-2 flex-wrap justify-content-center"
          >
            <div
              v-for="character in filteredData"
              :key="character.id"
              class="card text-white bg-dark mb-3"
            >
              <img
                :src="character.image"
                class="card-img-top caur-img"
                :alt="character.name"
              />
              <div class="card-body">
                <h5 class="card-title">Personaje: {{ character.name }}</h5>
                <p class="card-text">Especies: {{ character.species }}</p>
                <p class="card-text">Estado: {{ character.status }}</p>
                <p class="card-text">Dimensión: {{ character.origin.name }}</p>
                <div class="d-flex justify-content-between align-items-center">
                  <button
                    @click="toggleSelection(character)"
                    class="btn btn-secondary"
                  >
                    {{ isSelected(character) ? 'Deseleccionar' : 'Seleccionar'
                    }}
                  </button>
                  <a
                    :href="'details.html?id=' + character.id"
                    class="btn btn-primary"
                    >Perfil</a
                  >
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Sección de episodios -->
        <div v-else class="episode-list">
          <h2 class="text-center text-white">Episodios</h2>
          <div
            class="gap-2 container-fluid d-flex mt-2 flex-wrap justify-content-center"
          >
            <div
              v-for="episode in filteredData"
              :key="episode.id"
              class="card text-white bg-dark mb-3"
            >
              <img
                :src="getEpisodeImage(episode.id)"
                class="card-img-top"
                :alt="episode.name || 'Episodio'"
              />
              <div class="card-body">
                <h5 class="card-title">
                  Episodio: {{ episode.name || 'Sin nombre' }}
                </h5>
                <p class="card-text">
                  Temporada: {{ episode.episode || 'Desconocida' }}
                </p>
                <p class="card-text">
                  Fecha de emisión: {{ episode.air_date || 'Desconocida' }}
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Modal para mostrar selecciones -->
      <div
        class="modal fade"
        id="selectionsModal"
        tabindex="-1"
        aria-labelledby="selectionsModalLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="selectionsModalLabel">
                Personajes Seleccionados
              </h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
              ></button>
            </div>
            <div class="modal-body">
              <div class="row">
                <div
                  v-for="character in selectedCharacters"
                  :key="character.id"
                  class="col-md-4 mb-3"
                >
                  <div class="card">
                    <img
                      :src="character.image"
                      class="card-img-top"
                      :alt="character.name"
                    />
                    <div class="card-body">
                      <h5 class="card-title">{{ character.name }}</h5>
                      <p class="card-text">Especie: {{ character.species }}</p>
                      <button
                        @click="toggleSelection(character)"
                        class="btn btn-danger"
                      >
                        Deseleccionar
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Botón para abrir el modal -->
      <button
        type="button"
        class="btn btn-primary position-fixed bottom-0 end-0 m-3"
        data-bs-toggle="modal"
        data-bs-target="#selectionsModal"
      >
        Ver Selecciones
      </button>
      <!-- Botones de paginación -->
      <div class="d-flex justify-content-center align-items-center mt-4">
        <button
          class="btn btn-primary m-2"
          @click="fetchData(prevPage)"
          :disabled="!prevPage"
        >
          Anterior
        </button>

        <!-- Enumeración de páginas y campo de entrada -->
        <span class="text-white mx-2">
          Página
          <input
            type="number"
            v-model.number="currentPage"
            min="1"
            :max="totalPages"
            @change="goToPage(currentPage)"
            class="form-control form-control-sm d-inline-block w-auto"
          />
          de {{ totalPages }}
        </span>

        <button
          class="btn btn-primary m-2"
          @click="fetchData(nextPage)"
          :disabled="!nextPage"
        >
          Siguiente
        </button>
      </div>
    </main>

    <footer class="p-t-8">
      <div
        id="footer"
        class="container-fluid navbar d-flex flex-md-row flex-column justify-content-between flex-wrap"
      >
        <div class="d-flex gap-3 align-items-center justify-content-center">
          <a
            target="_blank"
            href="https://www.primevideo.com/detail/Rick-and-Morty/0QG2DSIPHWFT11LTO37WHI8W9V"
            ><img
              src="../assets/hbo-max-logo-1922879-removebg-preview.png"
              alt="HBO"
              class="social"
          /></a>
          <a
            target="_blank"
            href="https://www.max.com/co/es/shows/rick-and-morty/ab553cdc-e15d-4597-b65f-bec9201fd2dd"
            ><img
              src="../assets/Amazon-Prime-Video-Icon.png"
              alt="prime icon"
              class="social"
          /></a>
          <a target="_blank" href="https://www.youtube.com/watch?v=7vo9vajbXnY"
            ><img
              src="../assets/youtube-removebg-preview.png"
              alt="Youtube icon"
              class="social"
              href="https://www.youtube.com/watch?v=7vo9vajbXnY"
          /></a>
        </div>
        <div class="gap-3 d-flex align-items-center justify-content-center">
          <span>Gabriel Fernandez</span>
          <span>Karina Gonzalez</span>
          <span>Carlos Torreyes</span>
          <span>Edison Madrid</span>
        </div>
        <div class="d-flex align-items-center p-2 justify-content-center">
          <span>Cohort 5</span>
        </div>
      </div>
    </footer>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script type="module" src="../script/main.js"></script>
  </body>
</html>
