<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="shortcut icon"
      href="../assets/icons8-rick-sanchez-100.png"
      type="image/x-icon"
    />
    <title>RICK AND MORTY</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="../style/style.css" />
  </head>

  <body>
    <header class="container-fluid p-0">
      <div id="navbar">
        <nav class="navbar navbar-expand-md navbar-dark mb-4">
          <div class="container-fluid d-flex">
            <a class="navbar-brand" href="../html/index.html">
              <img class="logo" src="../assets/rickAndMortyLogo.png" alt="" />
            </a>
            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarNav"
              aria-controls="navbarNav"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
              <ul class="navbar-nav ms-auto">
                <li class="nav-item">
                  <a
                    class="nav-link"
                    style="font-size: larger"
                    href="../html/index.html"
                    ><img
                      class="home"
                      src="../assets/home-sin-animacion.png"
                      alt=""
                  /></a>
                </li>
                <li class="nav-item">
                  <a
                    class="nav-link"
                    style="font-size: larger"
                    href="../html/stadistics.html"
                    ><img
                      class="home"
                      src="../assets/Stats-5-9-2024.png"
                      alt=""
                  /></a>
                </li>
              </ul>
            </div>
          </div>
        </nav>
      </div>

      <!-- Carrusel -->
      <div
        id="carouselExampleSlidesOnly"
        class="carousel slide"
        data-bs-ride="carousel"
        data-bs-interval="4000"
      >
        <div class="carousel-inner">
          <div class="carousel-item active" data-bs-interval="4000">
            <img
              class="carrouselImg d-block w-100"
              src="../assets/epic-rick-and-morty.gif"
              alt="..."
            />
          </div>
          <div class="carousel-item">
            <img
              class="carrouselImg d-block w-100"
              src="../assets/1.gif"
              alt="..."
            />
          </div>
          <div class="carousel-item">
            <img
              class="carrouselImg d-block w-100"
              src="../assets/2.gif"
              alt="..."
            />
          </div>
          <div class="carousel-item">
            <img
              class="carrouselImg d-block w-100"
              src="../assets/3.gif"
              alt="..."
            />
          </div>
          <div class="carousel-item">
            <img
              class="carrouselImg d-block w-100"
              src="../assets/5.gif"
              alt="..."
            />
          </div>
          <audio id="carouselAudio" loop>
            <source
              src="../assets/Rick and Morty Theme_2.mp3"
              type="audio/mpeg"
            />
          </audio>
        </div>
      </div>

      <div
        class="container-fluid d-flex justify-content-center align-items-center mt-4"
      >
        <div
          class="w-80 rick-and-morty-font d-flex justify-content-center align-items-center p-4 flex-column"
        >
          <img
            class="descriptionImg"
            src="../assets/Description-6-9-2024.png"
            alt=""
          />
          <p class="text-success bg-dark border border-success rounded p-3">
            Rick and Morty is an innovative animated series that chronicles the
            unpredictable adventures of Rick Sanchez, a genius but morally
            ambiguous scientist, and his well-meaning but often overwhelmed
            grandson, Morty Smith. Combining sharp humor, dark satire, and
            thought-provoking philosophical themes, the show masterfully blends
            science fiction with everyday family life. As Rick and Morty travel
            across dimensions and alternate realities, the series explores deep
            existential questions, critiques modern society, and reveals the
            absurdity of the universe—all while maintaining its trademark wit
            and unpredictability.
          </p>
        </div>
      </div>
    </header>

    <main id="appHome">
      <div class="container-fluid p-2">
        <div class="modal fade" id="selectionsModal" tabindex="-1" aria-labelledby="selectionsModalLabel" aria-hidden="true">
          <div class="modal-dialog modal-lg">
            <div class="modal-content bg-dark text-light">
              <div class="modal-header border-success">
                <h5 class="modal-title text-success" id="selectionsModalLabel">Selected Characters</h5>
                <button type="button" class="btn-close bg-danger" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <!-- Si no hay personajes seleccionados, mostramos un mensaje -->
                <div v-if="selectedCharacters.length === 0" class="text-center">
                  <p class="bg-info text-success p-2 rounded">
                    No characters selected, please select a character
                  </p>
                  <img class="img-fluid" style="max-width: 300px;" src="../assets/Rick and Morty.jpeg" alt="Rick and Morty" />
                </div>
                <!-- Si hay personajes seleccionados, mostramos una lista de personajes -->
                <div v-else class="d-flex flex-wrap justify-content-center">
                  <div v-for="character in selectedCharacters" :key="character.id" class="p-2" style="width: 200px;">
                    <div class="card h-100 bg-black text-white">
                      <img :src="character.image" class="card-img-top caur-img" :alt="character.name" />
                      <div class="card-body d-flex flex-column">
                        <h5 class="card-title text-success">{{ character.name }}</h5>
                        <p class="card-text">Species: {{ character.species }}</p>
                        <p class="card-text">State: {{ character.status }}</p>
                        <p class="card-text">Dimension: {{ character.origin.name }}</p>
                        <div class="mt-auto">
                          <button @click="toggleSelection(character)" class="btn btn-danger btn-sm w-100">
                            Deselect
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="modal-footer border-success justify-content-between">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button @click="clearSelectedCharacters" class="btn btn-warning" v-if="selectedCharacters.length">
                  Clear Selection
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Barra de búsqueda y filtros -->
        <div
          class="d-flex flex-md-row flex-column justify-content-between align-items-center bg-dark rounded-3 text-white mt-3 mb-3 p-3 gap-2"
        >
          <!-- Botón para alternar entre personajes y episodios -->
          <button class="btn btn-danger me-2" @click="toggleData">
            watch {{ isCharacters ? 'Episodes' : 'Characters' }}
          </button>

          <!-- Filtros de estado y especies para personajes -->
          <!-- Sección de checkboxes con sonido -->
          <div
            v-if="isCharacters"
            class="d-flex flex-md-row flex-column align-items-center gap-3"
          >
            <!-- Checkboxes para estado -->
            <div class="d-flex align-items-center">
              <label for="status-filter" class="text-light me-2">
                Character Status:
              </label>
              <div class="form-check form-check-inline me-2">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="alive"
                  value="Alive"
                  v-model="statusFilter"
                  @change="playSound('alive')"
                />
                <label class="form-check-label text-success" for="alive">
                  Alive
                </label>
              </div>
              <div class="form-check form-check-inline">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="dead"
                  value="Dead"
                  v-model="statusFilter"
                  @change="playSound('dead')"
                />
                <label class="form-check-label text-danger" for="dead">
                  Dead
                </label>
              </div>
            </div>

            <!-- Dropdown para especies -->
            <div class="d-flex align-items-center">
              <label for="species-dropdown" class="text-info me-2">
                Species:
              </label>
              <button
                type="button"
                class="btn btn-outline-warning dropdown-toggle me-2"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                Select Species
              </button>
              <ul class="dropdown-menu" id="species-dropdown">
                <li v-for="species in allSpecies" :key="species">
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      :value="species"
                      v-model="speciesFilter"
                      :id="'species-' + species"
                    />
                    <label class="form-check-label" :for="'species-' + species">
                      {{ species }}
                    </label>
                  </div>
                </li>
              </ul>
            </div>
          </div>

          <!-- Barra de búsqueda  -->
          <div class="input-group w-auto">
            <input
              type="text"
              class="form-control form-control-sm"
              placeholder="Search"
              aria-label="Search"
              v-model="textSearch"
            />
            <button class="btn btn-outline-warning bg-dark bg-gradient">
              Search
            </button>
          </div>
        </div>

        <!-- Botones de paginación -->
        <div class="d-flex justify-content-center align-items-center mt-4">
          <button
            class="btn btn-primary m-2"
            @click="fetchData(prevPage)"
            :disabled="!prevPage"
          >
            Previous
          </button>

          <!-- Enumeración de páginas y campo de entrada -->
          <span class="text-white mx-2">
            Page
            <input
              type="number"
              v-model.number="currentPage"
              min="1"
              :max="totalPages"
              @change="goToPage(currentPage)"
              class="form-control form-control-sm d-inline-block w-auto"
            />
            of {{ totalPages }}
          </span>

          <button
            class="btn btn-success m-2"
            @click="fetchData(nextPage)"
            :disabled="!nextPage"
          >
            Next
          </button>
        </div>
      </div>

      <!-- Sección de personajes -->
      <div v-if="isCharacters" class="character-list">
        <h2 class="text-center text-white">Character</h2>
        <div v-if="filteredData.length === 0" class="text-center text-white">
          <p class="text-warning bg-dark p-3 rounded">
            sorry No characters found.
          </p>
          <img
            src="../assets/Rick and Morty.jpeg"
            alt="No results"
            class="mb-3"
          />
        </div>
        <div
          v-else
          class="gap-2 container-fluid d-flex mt-2 flex-wrap justify-content-center"
        >
          <div
            v-for="character in filteredData"
            :key="character.id"
            class="card text-white bg-dark mb-3 cardContainer"
          >
            <img
              :src="character.image"
              class="card-img-top caur-img"
              :alt="character.name"
            />
            <div class="card-body">
              <div class="textCard">
                <h5 class="card-title">Character: {{ character.name }}</h5>
                <p class="card-text">Species: {{ character.species }}</p>
                <p class="card-text">State: {{ character.status }}</p>
                <p class="card-text">Dimension: {{ character.origin.name }}</p>
              </div>
              <div
                class="d-flex justify-content-between align-items-center gap-2"
              >
                <p>Follow me</p>
                <a
                  :href="'./details.html?urlDetails=' + character.url"
                  class="btn btn-light"
                  >Profile</a
                >
              </div>
              <div class="d-flex justify-content-between container-fluid">
                <button
                  @click="toggleSelection(character)"
                  class="btn btn-outline-warning"
                >
                  {{ isSelected(character) ? '★' : '☆' }}
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Sección de episodios -->
      <div v-else class="episode-list">
        <h2 class="text-center text-white">Episodes</h2>
        <div v-if="filteredData.length === 0" class="text-center text-white">
          <p class="text-warning bg-dark p-3 rounded">
            Sorry No Episodes found.
          </p>
          <img
            src="../assets/Rick and Morty.jpeg"
            alt="No results"
            class="mb-3"
          />
        </div>
        <div
          v-else
          class="gap-2 container-fluid d-flex mt-2 flex-wrap justify-content-center"
        >
          <div
            v-for="episode in filteredData"
            :key="episode.id"
            class="card text-white bg-dark mb-3"
          >
            <img
              :src="getEpisodeImage(episode.id)"
              class="card-img-top"
              :alt="episode.name || 'Episode'"
            />
            <div class="card-body">
              <h5 class="card-title">
                Episode: {{ episode.name || 'Unnamed' }}
              </h5>
              <p class="card-text">
                Season: {{ episode.episode || 'Unknown' }}
              </p>
              <p class="card-text">
                Air date: {{ episode.air_date || 'Unknown' }}
              </p>
            </div>
          </div>
        </div>
      </div>

      <button
        type="button"
        class="btn btn-primary position-fixed bottom-0 end-0 m-3"
        data-bs-toggle="modal"
        data-bs-target="#selectionsModal"
      >
        See Selections
      </button>

      <!-- Botones de paginación -->
      <div class="d-flex justify-content-center align-items-center mt-4">
        <button
          class="btn btn-primary m-2"
          @click="fetchData(prevPage)"
          :disabled="!prevPage"
        >
          Previous
        </button>

        <!-- Enumeración de páginas y campo de entrada -->
        <span class="text-white mx-2">
          Page
          <input
            type="number"
            v-model.number="currentPage"
            min="1"
            :max="totalPages"
            @change="goToPage(currentPage)"
            class="form-control form-control-sm d-inline-block w-auto"
          />
          of {{ totalPages }}
        </span>

        <button
          class="btn btn-primary m-2"
          @click="fetchData(nextPage)"
          :disabled="!nextPage"
        >
          Next
        </button>
      </div>
    </main>

    <footer class="p-t-8">
      <div
        id="footer"
        class="container-fluid navbar d-flex flex-md-row flex-column justify-content-between flex-wrap"
      >
        <div class="d-flex gap-3 align-items-center justify-content-center">
          <a
            target="_blank"
            href="https://www.primevideo.com/detail/Rick-and-Morty/0QG2DSIPHWFT11LTO37WHI8W9V"
            ><img
              src="../assets/hbo-max-logo-1922879-removebg-preview.png"
              alt="HBO"
              class="social"
          /></a>
          <a
            target="_blank"
            href="https://www.max.com/co/es/shows/rick-and-morty/ab553cdc-e15d-4597-b65f-bec9201fd2dd"
            ><img
              src="../assets/Amazon-Prime-Video-Icon.png"
              alt="prime icon"
              class="social"
          /></a>
          <a target="_blank" href="https://www.youtube.com/watch?v=7vo9vajbXnY"
            ><img
              src="../assets/youtube-removebg-preview.png"
              alt="Youtube icon"
              class="social"
              href="https://www.youtube.com/watch?v=7vo9vajbXnY"
          /></a>
        </div>
        <div class="gap-3 d-flex align-items-center justify-content-center">
          <span>Gabriel Fernandez</span>
          <span>Karina Gonzalez</span>
          <span>Carlos Torreyes</span>
          <span>Edison Madrid</span>
        </div>
        <div class="d-flex align-items-center p-2 justify-content-center">
          <span>Cohort 5</span>
        </div>
      </div>
    </footer>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script type="module" src="../script/main.js"></script>
  </body>
</html>
